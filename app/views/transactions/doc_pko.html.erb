<% if @transaction.present? %>

<style type="text/css">
.panel-document {
    position: fixed;
    background-color: white;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    z-index: 999999999;
    overflow: overlay;
    font-family: serif;
}
/*.right-panel {
  position: fixed;
  width: 900px;
  height: 100%;
  background-color: white;
  top: 0;
  right: 0;
  z-index: 200;
  box-shadow: 0 0 6px 0 rgba(0, 0, 0, 0.4);
  overflow: overlay;
}*/
.panel-test {
    background-color: #4c4c4c;
    height: 100%;
    width: 60px;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 300;
}
.doc {
  width: 793.7007874016px;
  height: 559.3700787402px;
  background: white;
  margin: 0 auto;
}
.column {
  margin: 0 10px;
  display: grid;
}
.left {
  width: 458px;
  height: 100%;
  float: left;
  border: 1px dashed black;
  border-width: 0 1px 0 0;
  position: relative;
}
.right {
  width: 297px;
  height: 100%;
  float: right;
  border: 1px dashed black;
  border-width: 0 0 0 1px;
  position: relative;
}
.field_1 {
  text-align: center;
  font-size: 13px;
  margin-top: 20px;
}
.field_1>input {
  width: 100%;
  text-align: center;
  background-color: #f1f4ff;
  border: 1px solid black;
  border-width: 0 0 2px 0;
  font-size: 12px;
  padding: 3px;
}
.field_1>span {
    font-size: 11px;
}
.title_1 {
    font-size: 17px;
    text-align: center;
    margin: 20px;
}
.field_2 {
    font-size: 12px;
    display: table;
    width: 100%;
}
.field_2>span {
    width: 69%;
    float: left;
}
.field_2>div {
  width: 31%;
  border: 1px solid black;
  border-width: 0 0 2px 0;
  padding-bottom: 1px;
  text-align: center;
  float: right;
  height: 13px;
}
.field_3 {
    font-size: 12px;
     margin-top: 6px;
}
.field_3>div {
    float: left;
    margin-right: 6px;
}
.field_4 {
    font-size: 12px;
    margin-top: 6px;
}
.dsf {
    font-size: 12px;
}
.dsf>div {
  float: right;
  font-size: 11px;
}

.field>input, .field-div {
  width: 100%;
  text-align: center;
  background-color: #f1f4ff;
  border: 0;
  padding: 0;
  font-size: 11px!important;
}
div.field-div {
  text-align: left;
}
.field {
    position: relative;
}
.field>span {
    position: absolute;
    left: 0;
    right: 0;
    margin: 0 auto;
    text-align: center;
     bottom: -15px;
    font-size: 10px;
}
.word {
    /*height: 1122.519685039px;*/
    width: 793.7007874016px;
    background: #ffffff;
     margin: 0 auto 20px;
    /*padding: 40px;*/
    position: relative;
    z-index: 9999999;
}
.test {
  text-align: center;
  position: absolute;
  width: 100%;
  bottom: 30px;
  left: 0;
  font-size: 12px;
}
/*.class {
  position: absolute;
  left: 0;
  bottom: 50px;
  right: 0;
  margin: 0 auto;
  text-align: center;
  width: 200px;
  z-index: 9999;
  background-color: #3b89d1;
  border-radius: 12px;
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.4);
  cursor: pointer;
  user-select: none;
  border: 0;
  outline: none;
  color: white;
  text-transform: uppercase;
  font-size: 13px;
  padding: 20px 0;
}*/
.td-top {
  vertical-align: top;
}

ion-icon.hydrated {
    width: 23px;
    color: white;
    height: 23px;
    margin: 10px;
    float: left;
    padding: 8px;
    cursor: pointer;
}

ion-icon.hydrated:hover {
    background-color: white;
    border-radius: 50%;
    color: #4995dc;
}
@page { size: auto;  margin: 0mm; }

</style>


<div class="panel-test">
  <div>
    <ion-icon name="arrow-back"></ion-icon>
  </div>
  <div style="float: left;" onclick="window.print()">
    <ion-icon name="print"></ion-icon>
  </div>
</div>

<div class="word">


<p>Введите число</p>
<input type="number" onchange="start(this.value, 'rub', 'kop')">
<p id="rub"></p>
<p id="kop"></p>


  <div class="doc">
    <div class="left">
      <div class="column">
        <div class="dsf">
  <div>
  Унифицированная форма № КО-1<br />
  Утверждена постановлением Госкомстата<br />
  России от 18.08.98 № 88
  </div>

    <table style="width: 100%; font-size: 11px; padding-top: 15px;" cellspacing="0">
      <tr>
        <td></td>
        <td></td>
        <td style="width: 130px; border: 2px solid black; text-align: center; border-width: 2px 2px 0 2px;">Код</td>
      </tr>
      <tr>
        <td colspan="2" style="text-align: right; padding-right: 10px;">Форма по ОКУД</td>
        <td style="width: 130px; border: 2px solid black; text-align: center; border-width: 2px 2px 0 2px;">
          <div class="field">
            <input type="text" value="0310001" style="font-size: 10px;" title="Форма по ОКУД">
          </div>
        </td>
      </tr>
      <tr>
        <td style="border: 2px solid black; border-width: 0 0 2px 0;">
          <div class="field">
            <input type="text" value="<%= @current_company.name %>">
            <span>(организация)</span>
          </div>
        </td>
        <td style="text-align: right; padding-right: 10px;">по ОКПО</td>
        <td style="width: 130px; border: 2px solid black; text-align: center; border-width: 2px 2px 0 2px;">
          <div class="field">
            <input type="text" value="" style="font-size: 10px;" title="по ОКПО">
          </div>
        </td>
      </tr>
      <tr>
        <td colspan="2" style="border: 2px solid black; border-width: 0 0 2px 0;">
          <div class="field" style=" margin-top: 10px;">
            <input type="text" value="">
            <span>(структурное подразделение)</span>
          </div>
        </td>

        <td style="width: 130px; border: 2px solid black; text-align: center;">
          <div class="field">
            <input type="text" value="" style="font-size: 10px;" title="">
          </div>
        </td>
      </tr>
    </table>


    <table style="width: 100%; font-size: 11px; padding-top: 15px;" cellspacing="0">
      <tr>
        <td colspan="2"></td>
        <td style="width: 90px; border: 2px solid black; text-align: center; border-width: 2px 1px 0 2px;">Номер<br />документа</td>
        <td style="width: 90px; border: 2px solid black; text-align: center; border-width: 2px 2px 0 1px;">Дата<br />составления</td>
      </tr>
      <tr>
        <td colspan="2" style="text-align: center; font-size: 13px; font-weight: bold;">ПРИХОДНЫЙ КАССОВЫЙ ОРДЕР</td>

        <td style="width: 90px; border: 2px solid black; text-align: center; border-width: 2px 1px 2px 2px; max-width: 90px; max-height: 18px; overflow: hidden;"><%= @company_transaction.number_document %></td>
        <td style="width: 90px; border: 2px solid black; text-align: center; border-width: 2px 2px 2px 1px; max-width: 90px; max-height: 18px; overflow: hidden;"><%= @transaction.date.strftime("%d") + ' ' + nameMonth(@transaction.date.strftime("%m"), 2) + ' ' + @transaction.date.strftime("%Y") %></td>
      </tr>
    </table>

    <table style="width: 100%; font-size: 10px; padding-top: 15px;" cellspacing="0">
      <tr>
        <td rowspan="2" style="padding: 1px 3px; border: 2px solid black; text-align: center; border-width: 2px 1px 1px 2px; width: 30px;" class="td-top">Дебет</td>
        <td colspan="4" style="padding: 1px 3px; border: 2px solid black; text-align: center; border-width: 2px 1px 1px 1px;" class="td-top">Кредит</td>
        <td rowspan="2" style="padding: 1px 3px; border: 2px solid black; text-align: center; border-width: 2px 1px 1px 1px;" class="td-top">Сумма,<br />руб. коп</td>
        <td rowspan="2" style="padding: 1px 3px; border: 2px solid black; text-align: center; border-width: 2px 1px 1px 1px;" class="td-top">Код целевого<br />назначения</td>
        <td rowspan="2" style="padding: 1px 3px; border: 2px solid black; text-align: center; border-width: 2px 2px 1px 1px; width: 30px;"></td>
      </tr>
      <tr>
        <td style="padding: 1px 3px; border: 2px solid black; text-align: center; border-width: 1px 1px 1px 1px; width: 15px;"></td>
        <td style="padding: 1px 3px; border: 2px solid black; text-align: center; border-width: 1px 1px 1px 1px; width: 60px;" class="td-top">код струк-<br />турного под-<br />разделения</td>
        <td style="padding: 1px 3px; border: 2px solid black; text-align: center; border-width: 1px 1px 1px 1px; width: 60px;" class="td-top">корреспон-<br />дирующий<br />счет, субсчет</td>
        <td style="padding: 1px 3px; border: 2px solid black; text-align: center; border-width: 1px 1px 1px 1px; width: 60px;" class="td-top">код аналити-<br />ческого учета</td>
      </tr>
      <tr>
        <td style="padding: 1px 3px; border: 2px solid black; text-align: center; border-width: 1px 1px 2px 2px; width: 30px;">
          <div class="field">
            <input type="text" value="debt(@fin_operation.operation_object_id, @fin_operation.amount, @fin_operation.operation_type)" style="font-size: 10px!important">
          </div>
        </td>
        <td style="padding: 1px 3px; border: 2px solid black; text-align: center; border-width: 1px 1px 2px 1px; width: 15px;"></td>
        <td style="padding: 1px 3px; border: 2px solid black; text-align: center; border-width: 1px 1px 2px 1px; width: 60px;">
          <div class="field">
            <input type="text" value="" style="font-size: 10px;">
          </div>
        </td>
        <td style="padding: 1px 3px; border: 2px solid black; text-align: center; border-width: 1px 1px 2px 1px;">
          <div class="field">
            <input type="text" value="" style="font-size: 10px;">
          </div>
        </td>
        <td style="padding: 1px 3px; border: 2px solid black; text-align: center; border-width: 1px 1px 2px 1px; width: 60px;">
          <div class="field">
            <input type="text" value="" style="font-size: 10px;">
          </div>
        </td>
        <td style="padding: 1px 3px; border: 2px solid black; text-align: center; border-width: 1px 1px 2px 1px;">
          <div class="field-div" contenteditable="true" style="max-width: 65px; max-height: 12px; overflow: hidden; text-align: center;" onchange="start(this.value, 'rub', 'kop')">
            <%= @transaction.amount %>
          </div>
        </td>
        <td style="padding: 1px 3px; border: 2px solid black; text-align: center; border-width: 1px 1px 2px 1px;">
          <div class="field">
            <input type="text" value="" style="font-size: 10px;">
          </div>
        </td>
        <td style="padding: 1px 3px; border: 2px solid black; text-align: center; border-width: 1px 2px 2px 1px;"> </td>
      </tr>
      <tr style="font-size: 12px;">
        <td colspan="2" style="padding: 10px 3px 1px 3px;">Принято от</td>
        <td colspan="6" style="padding: 10px 3px 1px 3px; border: 2px solid black; border-width: 0 0 2px 0;">
          <div class="field-div" contenteditable="true" style="width: 361px;"></div>
        </td>
      </tr>
      <tr style="font-size: 12px;">
        <td colspan="2" style="padding: 10px 3px 1px 3px;">Основание:</td>
        <td colspan="6" style="padding: 10px 3px 1px 3px; border: 2px solid black; border-width: 0 0 2px 0;">
          <div class="field-div" contenteditable="true" style="width: 361px;"><%= @transaction.note %></div>
        </td>
      </tr>
<!--       <tr style="font-size: 12px;">
        <td colspan="8" style="padding: 10px 3px 1px 3px; border: 2px solid black; border-width: 0 0 2px 0; height: 22px;"></td>
      </tr> -->
      <tr style="font-size: 12px;">
        <td colspan="1" style="padding: 3px 3px 1px 3px;">Сумма</td>
        <td colspan="7" style="padding: 3px 3px 1px 3px; border: 2px solid black; border-width: 0 0 2px 0; text-align: center;">
            <div class="field">
              <div>Четыре тысячи</div>
              <span>(структурное подразделение)</span>
          </div>
        </td>
      </tr>
      <tr style="font-size: 12px;">
        <td colspan="5" style="padding: 13px 3px 1px 3px; border: 2px solid black; border-width: 0 0 2px 0;">
          <div class="field" style="">
            <input type="text" value="-">
          </div>
        </td>
        <td style="padding: 13px 3px 1px 3px; text-align: center;">руб.</td>
        <td style="padding: 13px 3px 1px 3px; border: 2px solid black; border-width: 0 0 2px 0;">
          <div class="field" style="">
            <input type="text" value="00">
          </div>
        </td>
        <td style="padding: 13px 3px 3px 3px; text-align: center;">коп.</td>
      </tr>
      <tr style="font-size: 12px;">
        <td colspan="2" style="padding: 3px 3px 1px 3px;">В том числе</td>
        <td colspan="6" style="padding: 3px 3px 1px 3px; border: 2px solid black; border-width: 0 0 2px 0;">
          <div class="field" style="">
            <input type="text" value="">
          </div>
        </td>
      </tr>
      <tr style="font-size: 12px;">
        <td colspan="2" style="padding: 3px 3px 1px 3px;">Приложение</td>
        <td colspan="6" style="padding: 3px 3px 1px 3px; border: 2px solid black; border-width: 0 0 2px 0;">
          <div class="field" style="">
            <input type="text" value="">
          </div>
        </td>
      </tr>

      <tr style="font-size: 12px;">
        <td colspan="3" style="padding: 21px 3px 1px 3px;">Главный бухгалтер</td>
        <td colspan="4" style="padding: 13px 3px 1px 3px;">
          <div class="field" style="float: left; margin-right: 20px;">
            <div style="padding: 3px 3px 1px 3px; border: 2px solid black; border-width: 0 0 2px 0; width: 84px; height: 15px;"></div>
            <span style="bottom: -50%;">(подпись)</span>
          </div>
          <div class="field" style="float: left;">
            <input type="text" value="" style="padding: 3px 3px 4px 3px; border: 2px solid black; border-width: 0 0 2px 0; width: 140px;">
            <span style="bottom: -50%;">(расшифровка подписи)</span>
          </div>
        </td>
      </tr>
      <tr style="font-size: 12px;">
        <td colspan="3" style="padding: 21px 3px 1px 3px;">Получил кассир</td>
        <td colspan="4" style="padding: 13px 3px 1px 3px;">
          <div class="field" style="float: left; margin-right: 20px;">
            <div style="padding: 3px 3px 1px 3px; border: 2px solid black; border-width: 0 0 2px 0; width: 84px; height: 15px;"></div>
            <span style="bottom: -50%;">(подпись)</span>
          </div>
          <div class="field" style="float: left;">
            <input type="text" value="<%= format_name(@current_people) %>" style="padding: 3px 3px 4px 3px; border: 2px solid black; border-width: 0 0 2px 0; width: 140px;">
            <span style="bottom: -50%;">(расшифровка подписи)</span>
          </div>
        </td>
      </tr>

    </table>


        </div>
      </div>
      <span style="position: absolute; bottom: 0; right: 10px; font-size: 9px; color: #a1a1a1;"><img src="/images/lflflf.png" style="width: 10px; margin-right: 5px; margin-bottom: -2px;">Квитанция подготовлена сервисом для учета Dreambox</span>
    </div>
    <div class="right">
      <div class="column">
        <div class="field_1">
          <input type="text" value="<%= @current_company.name %>">
          <span>(организация)</span>
        </div>
        <h2 class="title_1">Квитанция</h2>
        <div class="field_2">
          <span>к приходному кассовому ордеру №</span>
          <div><%= @company_transaction.number_document %></div>
        </div>
        <div class="field_3">
          <div>от</div> 
          <div>"<span style="padding: 0 8px; border: 1px solid black; border-width: 0 0 2px 0; padding-bottom: 1px; text-align: center;"><%= @transaction.date.strftime("%d") %></span>"</div> 
          <div style="    padding: 0 18px;
      border: 1px solid black;
      border-width: 0 0 2px 0;
      padding-bottom: 1px;
      text-align: center;
      min-width: 40px;"><%= nameMonth(@transaction.date.strftime("%m"), 2) %></div> 
          <div style="    padding: 0 13px;
      border: 1px solid black;
      border-width: 0 0 2px 0;
      padding-bottom: 1px;
      text-align: center;"><%= @transaction.date.strftime("%Y") %></div> г.
        </div>



    <table style="width: 100%; font-size: 10px; padding-top: 15px;" cellspacing="0">
      <tr style="font-size: 12px;">
        <td colspan="2" style="padding: 10px 3px 1px 3px;">Принято от</td>
        <td colspan="6" style="padding: 10px 3px 1px 3px; border: 2px solid black; border-width: 0 0 2px 0;">@client_subscription.first_name    @client_subscription.last_name    @client_subscription.patronymic</td>
      </tr>
      <tr style="font-size: 12px;">
        <td colspan="2" style="padding: 10px 3px 1px 3px;">Основание:</td>
        <td colspan="6" style="padding: 10px 3px 1px 3px; border: 2px solid black; border-width: 0 0 2px 0;">{{ transaction.note }}</td>
      </tr>
      <tr style="font-size: 12px;">
        <td colspan="8" style="padding: 10px 3px 1px 3px; border: 2px solid black; border-width: 0 0 2px 0; height: 22px;"></td>
      </tr>
      <tr style="font-size: 12px;">
        <td colspan="1" style="padding: 3px 3px 1px 3px;">Сумма</td>
        <td colspan="7" style="padding: 3px 3px 1px 3px; border: 2px solid black; border-width: 0 0 2px 0; text-align: center;">
            <div class="field">
              <div>Четыре тысячи</div>
              <span>(структурное подразделение)</span>
          </div>
        </td>
      </tr>
      <tr style="font-size: 12px;">
        <td colspan="5" style="padding: 13px 3px 1px 3px; border: 2px solid black; border-width: 0 0 2px 0;">
          <div class="field" style="">
            <input type="text" value="-">
          </div>
        </td>
        <td style="padding: 13px 3px 1px 3px; text-align: center;">руб.</td>
        <td style="padding: 13px 3px 1px 3px; border: 2px solid black; border-width: 0 0 2px 0;">
          <div class="field" style="">
            <input type="text" value="00">
          </div>
        </td>
        <td style="padding: 13px 3px 3px 3px; text-align: center;">коп.</td>
      </tr>
      <tr style="font-size: 12px;">
        <td colspan="2" style="padding: 3px 3px 1px 3px;">В том числе</td>
        <td colspan="6" style="padding: 3px 3px 1px 3px; border: 2px solid black; border-width: 0 0 2px 0;">
          <div class="field" style="">
            <input type="text" value="">
          </div>
        </td>
      </tr>
      <tr style="font-size: 12px;">
        <td colspan="2" style="padding: 3px 3px 1px 3px;">Приложение</td>
        <td colspan="6" style="padding: 3px 3px 1px 3px; border: 2px solid black; border-width: 0 0 2px 0;">
          <div class="field" style="">
            <input type="text" value="">
          </div>
        </td>
      </tr>

      <tr style="font-size: 12px;">
        <td colspan="3" style="padding: 21px 3px 1px 3px;">Главный бухгалтер</td>
        <td colspan="4" style="padding: 13px 3px 1px 3px;">
          <div class="field" style="float: left; margin-right: 20px;">
            <div style="padding: 3px 3px 1px 3px; border: 2px solid black; border-width: 0 0 2px 0; width: 84px; height: 15px;"></div>
            <span style="bottom: -50%;">(подпись)</span>
          </div>
          <div class="field" style="float: left;">
            <input type="text" value="" style="padding: 3px 3px 4px 3px; border: 2px solid black; border-width: 0 0 2px 0; width: 140px;">
            <span style="bottom: -50%;">(расшифровка подписи)</span>
          </div>
        </td>
      </tr>
      <tr style="font-size: 12px;">
        <td colspan="3" style="padding: 21px 3px 1px 3px;">Кассир</td>
        <td colspan="4" style="padding: 13px 3px 1px 3px;">
          <div class="field" style="float: left; margin-right: 20px;">
            <div style="padding: 3px 3px 1px 3px; border: 2px solid black; border-width: 0 0 2px 0; width: 84px; height: 15px;"></div>
            <span style="bottom: -50%;">(подпись)</span>
          </div>
          <div class="field" style="float: left;">
            <input type="text" value="<%= format_name(@current_people) %>" style="padding: 3px 3px 4px 3px; border: 2px solid black; border-width: 0 0 2px 0; width: 140px;">
            <span style="bottom: -50%;">(расшифровка подписи)</span>
          </div>
        </td>
      </tr>

    </table>
  </div>

      <span style="position: absolute; bottom: 0; left: 10px; font-size: 9px; color: #a1a1a1;"><img src="/images/lflflf.png" style="width: 10px; margin-right: 5px; margin-bottom: -2px;">Получайте полную информацию в сервисе Dreambox</span>
    </div>

  </div>

  <!-- <div class="test">1 из 2</div> -->
</div>
<script src="https://unpkg.com/ionicons@4.2.4/dist/ionicons.js"></script>

<% else %>
  Нет такого документа
<% end %>

<script>
  function start(value, rub, kop){
    // document.getElementsByTagName('p')[1].innerHTML = getSumInWords(value);
    getSumInWords(value, rub, kop);
  }
  /////////////////////////////////////////////////////////////////////////////////////
  function getSumInWords(sum, rub, kop){
    var res='';
    
    if (sum<=0) return 'нуль гривень 00 копiйок';
    
    var sumSymbols = String( Math.round(sum*100) );  
    
    var digits = sumSymbols.length;
    if (digits>11) return 'Обрабатываются только суммы менее 1 миллиарда!'
    
    // гривны
    if (sum<1) res = 'нуль гривень ';
      else res = getNameToNumber( sumSymbols.slice(0, digits-2), 0);  
    
    // копейки
    var kopeikiStr = sumSymbols.slice(-2);

    document.getElementById(rub).innerHTML = res;
    document.getElementById(kop).innerHTML = kopeikiStr;
    // res = res + kopeikiStr
    // res += getGroupNameToNumber(kopeikiStr, 3);
    // return res;
  }  
  //----------------------------------------------------------------------------------------------------------------  
  function getNameToNumber(sumSymbols, depth){
    var res='';  
    if (sumSymbols.length>3) {// если число еще не разбили на разряды до самых старших
      res+= getNameToNumber( sumSymbols.slice(0, sumSymbols.length-3), depth+1 ); // тогда отсекаем 3 младших разряда и рекурсивно идем дальше
    }  
    // берем последние 3 разряда числа как ЧИСЛО и переводим в прописной вариант
    var last3digits = +(('00'+sumSymbols).slice(-3))
    res += getDigitName( last3digits, (2-depth) );
   
    // добовляем название группы (миллионы, тысячи, гривны)
    res += getGroupNameToNumber(last3digits, (2-depth));  
    return res;
  }  

  //----------------------------------------------------------------------------------------------------------------  
  function getDigitName(x, group){
    var res='';
    var numberName = 
    [ ['', 'сто ', 'двісті ',   'триста ', 'чотириста ',  "п'ятсот ", 'шістсот ', 'сімсот ',  'вісімсот ', "дев'ятсот "],
      ['',   '',   'двадцять ', 'тридцять ', 'сорок ',  "п'ятьдесят ", 'шістьдесят ', 'сімдесят ',  'вісімдесят ', "дев'яносто "],
      ['', 'одна ', 'дві ', 'три ', 'чотири ',  "п'ять ", 'шість ', 'сім ',  'вісім ', "дев'ять "], 
      ['десять ', 'одинадцять ',  'дванадцять ', 'тринадцять ', 'чотирнадцять ',  "п'ятнадцять ", 'шістнадцять ', 'сімнадцять ',  'вісімнадцять ', "дев'ятнадцять "],
      ['', 'один ', 'два ', 'три ', 'чотири ',  "п'ять ", 'шість ', 'сім ',  'вісім ', "дев'ять "] ]; 
    
    // если на входе 000
    if (+x==0) return '';
    
    // сотни
    var hundreds = Math.floor(x/100);  
    res += numberName[0][hundreds];
    
    // десятки
    var tens = Math.floor(x/10) %10 ;  
    res += numberName[1][tens]; 
    
    var ones = Math.floor(x%10);  
    if (tens==1){ // оди-надцать - девят-надцать
      res += numberName[3][ones]; 
    } else  // единицы
        if (group) res += numberName[2][ones]; 
          else res += numberName[4][ones]; // для миллионов: не одна (гривня) миллион, а один миллион
    
    return res;
  }  
  //----------------------------------------------------------------------------------------------------------------  
  function getGroupNameToNumber(x, group){
    str = String(x);
  //прибавки для цифр 1,           2-4,       5-9,           0,  
    var groupName = [ ['мільйон ',  'мільйона ', 'мільйонiв ', 'мільйонiв '],
                  ['тисяча ',   'тисячі ',   'тисяч ',      'тисяч '],
                  ['гривня ',   'гривнi ',   'гривень ',    'гривень '],
                  [' копiйка',  ' копiйки',  ' копiйок',    ' копiйок'] ]; 
    
    // если на входе 000
    if ( +x==0 ) { 
      if (group>1) return groupName[group][2]; 
        else return ''; 
    }   
    // если число от одинадцати до девятнадцати
    if ( str.length>1 ) { 
      var preLastSymbol= str.slice(str.length-2,str.length-1); 
      if (preLastSymbol== '1') { return groupName[group][2]; }  
    }
    // для случаев, когда x!=0 и x!= ?1?;
    var lastSymbol = str.slice(-1);
    if (lastSymbol=='1') 
      return groupName[group][0];
    if (+lastSymbol>=2 && +lastSymbol<=4) 
      return groupName[group][1];
                                                                     
    return groupName[group][2];
  }  
</script>